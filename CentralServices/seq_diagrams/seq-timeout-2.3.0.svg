<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1235px" preserveAspectRatio="none" style="width:1719px;height:1235px;" version="1.1" viewBox="0 0 1719 1235" width="1719px" zoomAndPan="magnify"><defs><filter height="300%" id="fg6hqu2mqoezw" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="168" x="776.75" y="23.5352">2.3.0. Transfer Timeout</text><rect fill="#D3D3D3" height="1190.2246" style="stroke: #A80036; stroke-width: 1.0;" width="186" x="4" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="180" x="7" y="47.0566">Financial Service Providers</text><rect fill="#ADD8E6" height="1190.2246" style="stroke: #A80036; stroke-width: 1.0;" width="361" x="192" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="157" x="294" y="47.0566">ML API Adapter Service</text><rect fill="#FFFFE0" height="1190.2246" style="stroke: #A80036; stroke-width: 1.0;" width="1127.5" x="555" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="101" x="1068.25" y="47.0566">Central Service</text><rect fill="#FFFFFF" filter="url(#fg6hqu2mqoezw)" height="947.9609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="427.5" y="163.7754"/><rect fill="#FFFFFF" filter="url(#fg6hqu2mqoezw)" height="947.9609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="645.5" y="163.7754"/><rect fill="#FFFFFF" filter="url(#fg6hqu2mqoezw)" height="947.9609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1122" y="163.7754"/><rect fill="#FFFFFF" filter="url(#fg6hqu2mqoezw)" height="947.9609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1435" y="163.7754"/><rect fill="#FFFFFF" filter="url(#fg6hqu2mqoezw)" height="933.9609" style="stroke: #000000; stroke-width: 2.0;" width="1695.5" x="13" y="170.7754"/><rect fill="#FFFFFF" filter="url(#fg6hqu2mqoezw)" height="787.4082" style="stroke: #000000; stroke-width: 2.0;" width="1675.5" x="23" y="310.3281"/><rect fill="#FFFFFF" filter="url(#fg6hqu2mqoezw)" height="132.5527" style="stroke: #000000; stroke-width: 2.0;" width="1655.5" x="33" y="678.0547"/><rect fill="#FFFFFF" filter="url(#fg6hqu2mqoezw)" height="132.5527" style="stroke: #000000; stroke-width: 2.0;" width="1596.5" x="92" y="878.918"/><rect fill="#FFFFFF" height="54.2656" style="stroke: none; stroke-width: 1.0;" width="1675.5" x="23" y="1043.4707"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="67" x2="67" y1="153.7754" y2="1121.7363"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="126" x2="126" y1="153.7754" y2="1121.7363"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="251" x2="251" y1="153.7754" y2="1121.7363"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="432" x2="432" y1="153.7754" y2="1121.7363"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="650" x2="650" y1="153.7754" y2="1121.7363"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="837" x2="837" y1="153.7754" y2="1121.7363"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="984" x2="984" y1="153.7754" y2="1121.7363"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1127" x2="1127" y1="153.7754" y2="1121.7363"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1280" x2="1280" y1="153.7754" y2="1121.7363"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1439.5" x2="1439.5" y1="153.7754" y2="1121.7363"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1604.5" x2="1604.5" y1="153.7754" y2="1121.7363"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="43" y="134.334">DFSP1</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="46" y="150.8223">Payer</text><ellipse cx="67.5" cy="63.7988" fill="#FEFECE" filter="url(#fg6hqu2mqoezw)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M67.5,71.7988 L67.5,98.7988 M54.5,79.7988 L80.5,79.7988 M67.5,98.7988 L54.5,113.7988 M67.5,98.7988 L80.5,113.7988 " fill="none" filter="url(#fg6hqu2mqoezw)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="43" y="1134.2715">DFSP1</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="46" y="1150.7598">Payer</text><ellipse cx="67.5" cy="1163.7129" fill="#FEFECE" filter="url(#fg6hqu2mqoezw)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M67.5,1171.7129 L67.5,1198.7129 M54.5,1179.7129 L80.5,1179.7129 M67.5,1198.7129 L54.5,1213.7129 M67.5,1198.7129 L80.5,1213.7129 " fill="none" filter="url(#fg6hqu2mqoezw)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="102" y="134.334">DFSP2</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="104" y="150.8223">Payee</text><ellipse cx="126.5" cy="63.7988" fill="#FEFECE" filter="url(#fg6hqu2mqoezw)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M126.5,71.7988 L126.5,98.7988 M113.5,79.7988 L139.5,79.7988 M126.5,98.7988 L113.5,113.7988 M126.5,98.7988 L139.5,113.7988 " fill="none" filter="url(#fg6hqu2mqoezw)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="102" y="1134.2715">DFSP2</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="104" y="1150.7598">Payee</text><ellipse cx="126.5" cy="1163.7129" fill="#FEFECE" filter="url(#fg6hqu2mqoezw)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M126.5,1171.7129 L126.5,1198.7129 M113.5,1179.7129 L139.5,1179.7129 M126.5,1198.7129 L113.5,1213.7129 M126.5,1198.7129 L139.5,1213.7129 " fill="none" filter="url(#fg6hqu2mqoezw)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="196" y="150.8223">ML API Adapter</text><path d="M230.5,109.2871 L230.5,133.2871 M230.5,121.2871 L247.5,121.2871 " fill="none" filter="url(#fg6hqu2mqoezw)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="259.5" cy="121.2871" fill="#FEFECE" filter="url(#fg6hqu2mqoezw)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="196" y="1134.2715">ML API Adapter</text><path d="M230.5,1141.2246 L230.5,1165.2246 M230.5,1153.2246 L247.5,1153.2246 " fill="none" filter="url(#fg6hqu2mqoezw)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="259.5" cy="1153.2246" fill="#FEFECE" filter="url(#fg6hqu2mqoezw)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="227" x="316" y="150.8223">ML API Notification Event Handler</text><ellipse cx="432.5" cy="121.2871" fill="#FEFECE" filter="url(#fg6hqu2mqoezw)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="428.5,109.2871,434.5,104.2871,432.5,109.2871,434.5,114.2871,428.5,109.2871" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="227" x="316" y="1134.2715">ML API Notification Event Handler</text><ellipse cx="432.5" cy="1153.2246" fill="#FEFECE" filter="url(#fg6hqu2mqoezw)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="428.5,1141.2246,434.5,1136.2246,432.5,1141.2246,434.5,1146.2246,428.5,1141.2246" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="177" x="559" y="150.8223">Transfer Timeout Handler</text><ellipse cx="650.5" cy="121.2871" fill="#FEFECE" filter="url(#fg6hqu2mqoezw)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="646.5,109.2871,652.5,104.2871,650.5,109.2871,652.5,114.2871,646.5,109.2871" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="177" x="559" y="1134.2715">Transfer Timeout Handler</text><ellipse cx="650.5" cy="1153.2246" fill="#FEFECE" filter="url(#fg6hqu2mqoezw)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="646.5,1141.2246,652.5,1136.2246,650.5,1141.2246,652.5,1146.2246,646.5,1141.2246" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#fg6hqu2mqoezw)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="162" x="756" y="114.2871"/><rect fill="#FEFECE" filter="url(#fg6hqu2mqoezw)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="162" x="752" y="118.2871"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="148" x="759" y="138.8223">Position-Topic-dfsp1</text><rect fill="#FEFECE" filter="url(#fg6hqu2mqoezw)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="162" x="756" y="1120.7363"/><rect fill="#FEFECE" filter="url(#fg6hqu2mqoezw)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="162" x="752" y="1124.7363"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="148" x="759" y="1145.2715">Position-Topic-dfsp1</text><rect fill="#FEFECE" filter="url(#fg6hqu2mqoezw)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="936" y="114.2871"/><rect fill="#FEFECE" filter="url(#fg6hqu2mqoezw)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="932" y="118.2871"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="939" y="138.8223">Event-Topic</text><rect fill="#FEFECE" filter="url(#fg6hqu2mqoezw)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="936" y="1120.7363"/><rect fill="#FEFECE" filter="url(#fg6hqu2mqoezw)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="932" y="1124.7363"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="939" y="1145.2715">Event-Topic</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="154" x="1047" y="150.8223">Position Event Handler</text><ellipse cx="1127" cy="121.2871" fill="#FEFECE" filter="url(#fg6hqu2mqoezw)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1123,109.2871,1129,104.2871,1127,109.2871,1129,114.2871,1123,109.2871" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="154" x="1047" y="1134.2715">Position Event Handler</text><ellipse cx="1127" cy="1153.2246" fill="#FEFECE" filter="url(#fg6hqu2mqoezw)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1123,1141.2246,1129,1136.2246,1127,1141.2246,1129,1146.2246,1123,1141.2246" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#fg6hqu2mqoezw)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="118" x="1221" y="114.2871"/><rect fill="#FEFECE" filter="url(#fg6hqu2mqoezw)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="118" x="1217" y="118.2871"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="1224" y="138.8223">Transfer-Topic</text><rect fill="#FEFECE" filter="url(#fg6hqu2mqoezw)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="118" x="1221" y="1120.7363"/><rect fill="#FEFECE" filter="url(#fg6hqu2mqoezw)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="118" x="1217" y="1124.7363"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="1224" y="1145.2715">Transfer-Topic</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="157" x="1358.5" y="150.8223">Transfer Event Handler</text><ellipse cx="1440" cy="121.2871" fill="#FEFECE" filter="url(#fg6hqu2mqoezw)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1436,109.2871,1442,104.2871,1440,109.2871,1442,114.2871,1436,109.2871" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="157" x="1358.5" y="1134.2715">Transfer Event Handler</text><ellipse cx="1440" cy="1153.2246" fill="#FEFECE" filter="url(#fg6hqu2mqoezw)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1436,1141.2246,1442,1136.2246,1440,1141.2246,1442,1146.2246,1436,1141.2246" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#fg6hqu2mqoezw)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="1535.5" y="114.2871"/><rect fill="#FEFECE" filter="url(#fg6hqu2mqoezw)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="1531.5" y="118.2871"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="1538.5" y="138.8223">Notification-Topic</text><rect fill="#FEFECE" filter="url(#fg6hqu2mqoezw)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="1535.5" y="1120.7363"/><rect fill="#FEFECE" filter="url(#fg6hqu2mqoezw)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="1531.5" y="1124.7363"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="1538.5" y="1145.2715">Notification-Topic</text><rect fill="#FFFFFF" filter="url(#fg6hqu2mqoezw)" height="947.9609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="427.5" y="163.7754"/><rect fill="#FFFFFF" filter="url(#fg6hqu2mqoezw)" height="947.9609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="645.5" y="163.7754"/><rect fill="#FFFFFF" filter="url(#fg6hqu2mqoezw)" height="947.9609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1122" y="163.7754"/><rect fill="#FFFFFF" filter="url(#fg6hqu2mqoezw)" height="947.9609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1435" y="163.7754"/><path d="M13,170.7754 L163,170.7754 L163,177.7754 L153,187.7754 L13,187.7754 L13,170.7754 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="933.9609" style="stroke: #000000; stroke-width: 2.0;" width="1695.5" x="13" y="170.7754"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="105" x="28" y="184.3438">Transfer Expiry</text><rect fill="#FFFFFF" filter="url(#fg6hqu2mqoezw)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="480" x="556" y="213.0859"/><polygon fill="#EEEEEE" points="556,213.0859,620,213.0859,620,220.0859,610,230.0859,556,230.0859,556,213.0859" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="569" y="227.6543">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="688" y="246.6543">Timeout Handler Consume {2.3.1.}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="692" y="261.9648"/><polygon fill="#A80036" points="825,291.3281,835,295.3281,825,299.3281,829,295.3281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="655.5" x2="831" y1="295.3281" y2="295.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="662.5" y="290.5859">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="675.5" y="290.5859">Produce message</text><path d="M23,310.3281 L85,310.3281 L85,317.3281 L75,327.3281 L23,327.3281 L23,310.3281 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="787.4082" style="stroke: #000000; stroke-width: 2.0;" width="1675.5" x="23" y="310.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="38" y="323.8965">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="149" x="100" y="322.9629">[Consume Single Message]</text><polygon fill="#A80036" points="848,369.9492,838,373.9492,848,377.9492,844,373.9492" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="842" x2="1121" y1="373.9492" y2="373.9492"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="854" y="369.207">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="867" y="369.207">Consume message</text><rect fill="#FFFFFF" filter="url(#fg6hqu2mqoezw)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="593" x="749" y="381.9492"/><polygon fill="#EEEEEE" points="749,381.9492,813,381.9492,813,388.9492,803,398.9492,749,398.9492,749,381.9492" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="762" y="396.5176">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="275" x="908" y="415.5176">Position Hander Consume (Timeout) {2.3.2.}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="912" y="430.8281"/><polygon fill="#A80036" points="1268,460.1914,1278,464.1914,1268,468.1914,1272,464.1914" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1132" x2="1274" y1="464.1914" y2="464.1914"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1139" y="459.4492">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="1152" y="459.4492">Produce message</text><polygon fill="#A80036" points="1291,514.502,1281,518.502,1291,522.502,1287,518.502" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1285" x2="1434" y1="518.502" y2="518.502"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1297" y="513.7598">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="1310" y="513.7598">Consume message</text><rect fill="#FFFFFF" filter="url(#fg6hqu2mqoezw)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="748.5" x="929" y="526.502"/><polygon fill="#EEEEEE" points="929,526.502,993,526.502,993,533.502,983,543.502,929,543.502,929,526.502" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="942" y="541.0703">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="1163.25" y="560.0703">Transfer Handler Consume (Timeout) {2.3.3.}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1167.25" y="575.3809"/><polygon fill="#A80036" points="1593,604.7441,1603,608.7441,1593,612.7441,1597,608.7441" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1445" x2="1599" y1="608.7441" y2="608.7441"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1452" y="604.002">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="1465" y="604.002">Produce message</text><polygon fill="#A80036" points="1593,659.0547,1603,663.0547,1593,667.0547,1597,663.0547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="437.5" x2="1599" y1="663.0547" y2="663.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="444.5" y="658.3125">6</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="127" x="457.5" y="658.3125">Consume message</text><path d="M33,678.0547 L100,678.0547 L100,685.0547 L90,695.0547 L33,695.0547 L33,678.0547 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="132.5527" style="stroke: #000000; stroke-width: 2.0;" width="1655.5" x="33" y="678.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="48" y="691.623">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="284" x="115" y="690.6895">[action IN ['timeout-received', 'timeout-reserved']]</text><rect fill="#FFFFFF" filter="url(#fg6hqu2mqoezw)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="1637.5" x="40" y="720.3652"/><polygon fill="#EEEEEE" points="40,720.3652,104,720.3652,104,727.3652,94,737.3652,40,737.3652,40,720.3652" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="53" y="734.9336">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="714.75" y="753.9336">Send notification to Participant (Payer) {1.1.4.}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="718.75" y="769.2441"/><polygon fill="#A80036" points="78.5,798.6074,68.5,802.6074,78.5,806.6074,74.5,802.6074" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="72.5" x2="426.5" y1="802.6074" y2="802.6074"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="84.5" y="797.8652">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="97.5" y="797.8652">Send callback notification</text><polygon fill="#A80036" points="1593,859.918,1603,863.918,1593,867.918,1597,863.918" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="437.5" x2="1599" y1="863.918" y2="863.918"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="444.5" y="859.1758">8</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="127" x="457.5" y="859.1758">Consume message</text><path d="M92,878.918 L159,878.918 L159,885.918 L149,895.918 L92,895.918 L92,878.918 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="132.5527" style="stroke: #000000; stroke-width: 2.0;" width="1596.5" x="92" y="878.918"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="107" y="892.4863">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="172" x="174" y="891.5527">[action == 'timeout-reserved']</text><rect fill="#FFFFFF" filter="url(#fg6hqu2mqoezw)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="1578.5" x="99" y="921.2285"/><polygon fill="#EEEEEE" points="99,921.2285,163,921.2285,163,928.2285,153,938.2285,99,938.2285,99,921.2285" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="112" y="935.7969">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="290" x="743.25" y="954.7969">Send notification to Participant (Payee) {1.1.4.}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="747.25" y="970.1074"/><polygon fill="#A80036" points="137.5,999.4707,127.5,1003.4707,137.5,1007.4707,133.5,1003.4707" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="131.5" x2="426.5" y1="1003.4707" y2="1003.4707"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="143.5" y="998.7285">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="156.5" y="998.7285">Send callback notification</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="23" x2="1698.5" y1="1044.4707" y2="1044.4707"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="151" x="28" y="1055.1055">[Consume Batch Messages]</text><path d="M899,1063.4258 L899,1088.4258 L1113,1088.4258 L1113,1073.4258 L1103,1063.4258 L899,1063.4258 " fill="#ADD8E6" filter="url(#fg6hqu2mqoezw)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1103,1063.4258 L1103,1073.4258 L1113,1073.4258 L1103,1063.4258 " fill="#ADD8E6" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="905" y="1080.9941">To be delivered by future story</text><!--
@startuml
title 2.3.0. Transfer Timeout

autonumber


actor "DFSP1\nPayer" as DFSP1
actor "DFSP2\nPayee" as DFSP2
boundary "ML API Adapter" as MLAPI
control "ML API Notification Event Handler" as NOTIFY_HANDLER
control "Transfer Timeout Handler" as EXP_HANDLER
collections "Position-Topic-dfsp1" as TOPIC_POSITION_DFSP1
control "Position Event Handler" as POS_HANDLER
collections "Transfer-Topic" as TOPIC_TRANSFERS
control "Transfer Event Handler" as TRANS_HANDLER
collections "Notification-Topic" as TOPIC_NOTIFICATIONS
collections "Event-Topic" as TOPIC_EVENT

box "Financial Service Providers" #lightGray
	participant DFSP1
	participant DFSP2
end box

box "ML API Adapter Service" #LightBlue
	participant MLAPI
	participant NOTIFY_HANDLER
end box

box "Central Service" #LightYellow
    participant EXP_HANDLER
    participant TOPIC_POSITION_DFSP1
    participant TOPIC_EVENT
    participant POS_HANDLER
    participant TOPIC_TRANSFERS
    participant TRANS_HANDLER
    participant TOPIC_NOTIFICATIONS
end box

activate NOTIFY_HANDLER
activate EXP_HANDLER
activate POS_HANDLER
activate TRANS_HANDLER
group Transfer Expiry
    |||
    ref over EXP_HANDLER, TOPIC_EVENT :  Timeout Handler Consume {2.3.1.} \n
    EXP_HANDLER -> TOPIC_POSITION_DFSP1: Produce message
    
    alt Consume Single Message
        |||
        TOPIC_POSITION_DFSP1 <- POS_HANDLER: Consume message
        ref over TOPIC_POSITION_DFSP1, TOPIC_TRANSFERS :  Position Hander Consume (Timeout) {2.3.2.} \n
        POS_HANDLER -> TOPIC_TRANSFERS: Produce message
        |||
        TOPIC_TRANSFERS <- TRANS_HANDLER: Consume message
        ref over TOPIC_EVENT, TOPIC_NOTIFICATIONS : Transfer Handler Consume (Timeout) {2.3.3.} \n
        TRANS_HANDLER -> TOPIC_NOTIFICATIONS: Produce message
        |||
        TOPIC_NOTIFICATIONS <- NOTIFY_HANDLER: <color #FF0000>**Consume message**</color>
        opt action IN ['timeout-received', 'timeout-reserved']
            |||
            ref over DFSP1, TOPIC_NOTIFICATIONS : Send notification to Participant (Payer) {1.1.4.} \n
            NOTIFY_HANDLER -> DFSP1: Send callback notification
        end
        |||
        TOPIC_NOTIFICATIONS <- NOTIFY_HANDLER: <color #FF0000>**Consume message**</color>
        opt action == 'timeout-reserved'
            |||
            ref over DFSP2, TOPIC_NOTIFICATIONS : Send notification to Participant (Payee) {1.1.4.} \n
            NOTIFY_HANDLER -> DFSP2: Send callback notification
        end
        |||
    else Consume Batch Messages
        note left of POS_HANDLER #lightblue
            To be delivered by future story
        end note
    end
end
deactivate TRANS_HANDLER
deactivate POS_HANDLER
deactivate EXP_HANDLER
deactivate NOTIFY_HANDLER
@enduml

PlantUML version 1.2018.05(Sat May 05 23:00:17 EEST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_131-b11
Operating System: Mac OS X
OS Version: 10.13.4
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>