<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1015px" preserveAspectRatio="none" style="width:2032px;height:1015px;" version="1.1" viewBox="0 0 2032 1015" width="2032px" zoomAndPan="magnify"><defs><filter height="300%" id="f6dwxmrc2n5lg" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="562" x="735.5" y="22.9951">1.1.4.a. Send notification to Participant (Payer/Payee) (single message)</text><rect fill="#D3D3D3" height="970.6406" style="stroke: #A80036; stroke-width: 1.0;" width="196" x="4" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="190" x="7" y="46.3638">Financial Service Provider</text><rect fill="#ADD8E6" height="970.6406" style="stroke: #A80036; stroke-width: 1.0;" width="238" x="635" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="173" x="667.5" y="46.3638">ML API Adapter Service</text><rect fill="#FFFFE0" height="970.6406" style="stroke: #A80036; stroke-width: 1.0;" width="1089.5" x="898.5" y="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="111" x="1387.75" y="46.3638">Central Service</text><rect fill="#FFFFFF" filter="url(#f6dwxmrc2n5lg)" height="729.3203" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="749" y="163.0234"/><rect fill="#FFFFFF" filter="url(#f6dwxmrc2n5lg)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="968" y="208.2891"/><rect fill="#FFFFFF" filter="url(#f6dwxmrc2n5lg)" height="197.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1294" y="291.5547"/><rect fill="#FFFFFF" filter="url(#f6dwxmrc2n5lg)" height="209.0625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1294" y="594.8828"/><rect fill="#FFFFFF" filter="url(#f6dwxmrc2n5lg)" height="139.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1498" y="320.6875"/><rect fill="#FFFFFF" filter="url(#f6dwxmrc2n5lg)" height="120.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1625" y="639.1484"/><rect fill="#FFFFFF" filter="url(#f6dwxmrc2n5lg)" height="62.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1931" y="668.2813"/><rect fill="#FFFFFF" filter="url(#f6dwxmrc2n5lg)" height="715.3203" style="stroke: #000000; stroke-width: 2.0;" width="1967" x="53" y="170.0234"/><rect fill="#FFFFFF" filter="url(#f6dwxmrc2n5lg)" height="244.0625" style="stroke: #000000; stroke-width: 2.0;" width="936" x="629" y="253.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="102" x2="102" y1="153.0234" y2="902.3438"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="754" x2="754" y1="153.0234" y2="902.3438"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="972.5" x2="972.5" y1="153.0234" y2="902.3438"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1299" x2="1299" y1="153.0234" y2="902.3438"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1503" x2="1503" y1="153.0234" y2="902.3438"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1629.5" x2="1629.5" y1="153.0234" y2="902.3438"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1936" x2="1936" y1="153.0234" y2="902.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="71" y="133.4248">DFSP(n)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="63" y="149.7217">Participant</text><ellipse cx="102" cy="63.4297" fill="#FEFECE" filter="url(#f6dwxmrc2n5lg)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M102,71.4297 L102,98.4297 M89,79.4297 L115,79.4297 M102,98.4297 L89,113.4297 M102,98.4297 L115,113.4297 " fill="none" filter="url(#f6dwxmrc2n5lg)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="71" y="914.3389">DFSP(n)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="63" y="930.6357">Participant</text><ellipse cx="102" cy="943.9375" fill="#FEFECE" filter="url(#f6dwxmrc2n5lg)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M102,951.9375 L102,978.9375 M89,959.9375 L115,959.9375 M102,978.9375 L89,993.9375 M102,978.9375 L115,993.9375 " fill="none" filter="url(#f6dwxmrc2n5lg)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="224" x="639" y="149.7217">ML API Notification Event Handler</text><ellipse cx="754" cy="120.7266" fill="#FEFECE" filter="url(#f6dwxmrc2n5lg)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="750,108.7266,756,103.7266,754,108.7266,756,113.7266,750,108.7266" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="224" x="639" y="914.3389">ML API Notification Event Handler</text><ellipse cx="754" cy="933.6406" fill="#FEFECE" filter="url(#f6dwxmrc2n5lg)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="750,921.6406,756,916.6406,754,921.6406,756,926.6406,750,921.6406" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f6dwxmrc2n5lg)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="133" x="906.5" y="113.7266"/><rect fill="#FEFECE" filter="url(#f6dwxmrc2n5lg)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="133" x="902.5" y="117.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="909.5" y="137.7217">Notification-Topic</text><rect fill="#FEFECE" filter="url(#f6dwxmrc2n5lg)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="133" x="906.5" y="901.3438"/><rect fill="#FEFECE" filter="url(#f6dwxmrc2n5lg)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="133" x="902.5" y="905.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="909.5" y="925.3389">Notification-Topic</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="1232" y="149.7217">Central Service API</text><path d="M1278.5,108.7266 L1278.5,132.7266 M1278.5,120.7266 L1295.5,120.7266 " fill="none" filter="url(#f6dwxmrc2n5lg)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="1307.5" cy="120.7266" fill="#FEFECE" filter="url(#f6dwxmrc2n5lg)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="1232" y="914.3389">Central Service API</text><path d="M1278.5,921.6406 L1278.5,945.6406 M1278.5,933.6406 L1295.5,933.6406 " fill="none" filter="url(#f6dwxmrc2n5lg)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="1307.5" cy="933.6406" fill="#FEFECE" filter="url(#f6dwxmrc2n5lg)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f6dwxmrc2n5lg)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="1455" y="113.7266"/><rect fill="#FEFECE" filter="url(#f6dwxmrc2n5lg)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="1451" y="117.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="1458" y="137.7217">Event-Topic</text><rect fill="#FEFECE" filter="url(#f6dwxmrc2n5lg)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="1455" y="901.3438"/><rect fill="#FEFECE" filter="url(#f6dwxmrc2n5lg)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="1451" y="905.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="1458" y="925.3389">Event-Topic</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="1573.5" y="149.7217">Participant DAO</text><ellipse cx="1630" cy="120.7266" fill="#FEFECE" filter="url(#f6dwxmrc2n5lg)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1618" x2="1642" y1="134.7266" y2="134.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="1573.5" y="914.3389">Participant DAO</text><ellipse cx="1630" cy="933.6406" fill="#FEFECE" filter="url(#f6dwxmrc2n5lg)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1618" x2="1642" y1="947.6406" y2="947.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1888" y="149.7217">Central Store</text><path d="M1918,100.7266 C1918,90.7266 1936,90.7266 1936,90.7266 C1936,90.7266 1954,90.7266 1954,100.7266 L1954,126.7266 C1954,136.7266 1936,136.7266 1936,136.7266 C1936,136.7266 1918,136.7266 1918,126.7266 L1918,100.7266 " fill="#FEFECE" filter="url(#f6dwxmrc2n5lg)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1918,100.7266 C1918,110.7266 1936,110.7266 1936,110.7266 C1936,110.7266 1954,110.7266 1954,100.7266 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1888" y="914.3389">Central Store</text><path d="M1918,927.6406 C1918,917.6406 1936,917.6406 1936,917.6406 C1936,917.6406 1954,917.6406 1954,927.6406 L1954,953.6406 C1954,963.6406 1936,963.6406 1936,963.6406 C1936,963.6406 1918,963.6406 1918,953.6406 L1918,927.6406 " fill="#FEFECE" filter="url(#f6dwxmrc2n5lg)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1918,927.6406 C1918,937.6406 1936,937.6406 1936,937.6406 C1936,937.6406 1954,937.6406 1954,927.6406 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#f6dwxmrc2n5lg)" height="729.3203" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="749" y="163.0234"/><rect fill="#FFFFFF" filter="url(#f6dwxmrc2n5lg)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="968" y="208.2891"/><rect fill="#FFFFFF" filter="url(#f6dwxmrc2n5lg)" height="197.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1294" y="291.5547"/><rect fill="#FFFFFF" filter="url(#f6dwxmrc2n5lg)" height="209.0625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1294" y="594.8828"/><rect fill="#FFFFFF" filter="url(#f6dwxmrc2n5lg)" height="139.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1498" y="320.6875"/><rect fill="#FFFFFF" filter="url(#f6dwxmrc2n5lg)" height="120.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1625" y="639.1484"/><rect fill="#FFFFFF" filter="url(#f6dwxmrc2n5lg)" height="62.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1931" y="668.2813"/><path d="M53,170.0234 L329,170.0234 L329,177.0234 L319,187.0234 L53,187.0234 L53,170.0234 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="715.3203" style="stroke: #000000; stroke-width: 2.0;" width="1967" x="53" y="170.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="231" x="68" y="183.0903">Send notification to Participant</text><polygon fill="#A80036" points="956,204.2891,966,208.2891,956,212.2891,960,208.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="759" x2="962" y1="208.2891" y2="208.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="766" y="203.2231">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="779" y="203.2231">Consume Notification event</text><path d="M629,253.2891 L861,253.2891 L861,260.2891 L851,270.2891 L629,270.2891 L629,253.2891 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="244.0625" style="stroke: #000000; stroke-width: 2.0;" width="936" x="629" y="253.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="187" x="644" y="266.356">Persist Event Information</text><polygon fill="#A80036" points="1282,287.5547,1292,291.5547,1282,295.5547,1286,291.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="759" x2="1288" y1="291.5547" y2="291.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="766" y="286.4888">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="340" x="779" y="286.4888">Request to persist event information - POST - /events</text><polygon fill="#A80036" points="1486,316.6875,1496,320.6875,1486,324.6875,1490,320.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1304" x2="1492" y1="320.6875" y2="320.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1311" y="315.6216">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="1324" y="315.6216">Publish event information</text><rect fill="#FFFFFF" filter="url(#f6dwxmrc2n5lg)" height="55.3984" style="stroke: #000000; stroke-width: 2.0;" width="223" x="1448" y="353.6875"/><polygon fill="#EEEEEE" points="1448,353.6875,1514,353.6875,1514,360.6875,1504,370.6875,1448,370.6875,1448,353.6875" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="1461" y="367.7544">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="1454" y="386.7544">Event Handler Consume {</text><a target="_top" xlink:actuate="onRequest" xlink:href="https://github.com/mojaloop/docs/blob/develop/CentralServices/seq_diagrams/seq-event-9.1.0.svg" xlink:show="new" xlink:title="https://github.com/mojaloop/docs/blob/develop/CentralServices/seq_diagrams/seq-event-9.1.0.svg" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="36" x="1621" y="386.7544">9.1.0.</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="1621" x2="1657" y1="388.7544" y2="388.7544"/></a><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="1657" y="386.7544">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1458" y="401.8872"/><polygon fill="#A80036" points="1315,456.2188,1305,460.2188,1315,464.2188,1311,460.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1309" x2="1502" y1="460.2188" y2="460.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1321" y="455.1528">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="1334" y="455.1528">Return success</text><polygon fill="#A80036" points="770,485.3516,760,489.3516,770,493.3516,766,489.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="764" x2="1298" y1="489.3516" y2="489.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="776" y="484.2856">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="789" y="484.2856">Return success</text><path d="M764,509.3516 L764,549.3516 L1097,549.3516 L1097,519.3516 L1087,509.3516 L764,509.3516 " fill="#D3D3D3" filter="url(#f6dwxmrc2n5lg)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1087,509.3516 L1087,519.3516 L1097,519.3516 L1087,509.3516 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="312" x="770" y="526.4185">The endpoint details are cached, when the cache</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="237" x="770" y="541.5513">expires, the details are fetched again</text><polygon fill="#A80036" points="1282,590.8828,1292,594.8828,1282,598.8828,1286,594.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="759" x2="1288" y1="594.8828" y2="594.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="766" y="582.2505">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="503" x="779" y="574.6841">Request Endpoint details for Participant - GET - /participants/{{fsp}}/endpoints</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="779" y="589.8169">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="865" y="589.8169">2003</text><polygon fill="#A80036" points="1613,635.1484,1623,639.1484,1613,643.1484,1617,639.1484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1304" x2="1619" y1="639.1484" y2="639.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1311" y="626.5161">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="1324" y="618.9497">Fetch Endpoint details for Participant</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="1324" y="634.0825">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="1410" y="634.0825">2003</text><polygon fill="#A80036" points="1919,664.2813,1929,668.2813,1919,672.2813,1923,668.2813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1635" x2="1925" y1="668.2813" y2="668.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1642" y="663.2153">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="1655" y="663.2153">Fetch Endpoint details for Participant</text><polygon fill="#FFFFE0" filter="url(#f6dwxmrc2n5lg)" points="1872,681.2813,2000,681.2813,2010,692.2813,2000,704.2813,1872,704.2813,1862,692.2813,1872,681.2813" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="1874" y="697.3481">participantEndpoint</text><polygon fill="#A80036" points="1646,726.5469,1636,730.5469,1646,734.5469,1642,730.5469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1640" x2="1935" y1="730.5469" y2="730.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1652" y="725.481">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="259" x="1665" y="725.481">Retrieved Endpoint details for Participant</text><polygon fill="#A80036" points="1315,755.6797,1305,759.6797,1315,763.6797,1311,759.6797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1309" x2="1629" y1="759.6797" y2="759.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1321" y="754.6138">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="241" x="1343" y="754.6138">Return Endpoint details for Participant</text><polygon fill="#A80036" points="770,799.9453,760,803.9453,770,807.9453,766,803.9453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="764" x2="1298" y1="803.9453" y2="803.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="776" y="791.313">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="241" x="798" y="783.7466">Return Endpoint details for Participant</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="798" y="798.8794">Error codes:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="892" y="798.8794">3202, 3203</text><polygon fill="#A80036" points="113,844.2109,103,848.2109,113,852.2109,109,848.2109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="107" x2="748" y1="848.2109" y2="848.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="119" y="835.5786">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="542" x="141" y="828.0122">Callback with Prepare/fulfil result/error to Participant to specified Endpoint - POST/PUT</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="141" y="843.145">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="227" y="843.145">1001</text><polygon fill="#A80036" points="737,873.3438,747,877.3438,737,881.3438,741,877.3438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="102" x2="743" y1="877.3438" y2="877.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="109" y="872.2778">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="131" y="872.2778">HTTP 200 OK</text><!--
@startuml


title 1.1.4.a. Send notification to Participant (Payer/Payee) (single message)

autonumber


actor "DFSP(n)\nParticipant" as DFSP
control "ML API Notification Event Handler" as NOTIFY_HANDLER
boundary "Central Service API" as CSAPI
collections "Notification-Topic" as TOPIC_NOTIFICATIONS
collections "Event-Topic" as TOPIC_EVENTS
entity "Participant DAO" as PARTICIPANT_DAO
database "Central Store" as DB

box "Financial Service Provider" #lightGray
	participant DFSP
end box

box "ML API Adapter Service" #LightBlue
	participant NOTIFY_HANDLER
end box

box "Central Service" #LightYellow
participant TOPIC_NOTIFICATIONS
    participant CSAPI
    participant TOPIC_EVENTS
    participant PARTICIPANT_DAO
    participant DB
end box

activate NOTIFY_HANDLER
group Send notification to Participant
    TOPIC_NOTIFICATIONS <- NOTIFY_HANDLER: Consume Notification event
    activate TOPIC_NOTIFICATIONS
    deactivate TOPIC_NOTIFICATIONS

    group Persist Event Information
        NOTIFY_HANDLER -> CSAPI: Request to persist event information - POST - /events
        activate CSAPI
        CSAPI -> TOPIC_EVENTS: Publish event information
        activate TOPIC_EVENTS
        |||
        ref over TOPIC_EVENTS :  Event Handler Consume {[[https://github.com/mojaloop/docs/blob/develop/CentralServices/seq_diagrams/seq-event-9.1.0.svg 9.1.0.]]} \n
        |||
        TOPIC_EVENTS - -> CSAPI: Return success
        deactivate TOPIC_EVENTS
        CSAPI - -> NOTIFY_HANDLER: Return success
        deactivate CSAPI
    end
    note right of NOTIFY_HANDLER #lightgray
        The endpoint details are cached, when the cache
        expires, the details are fetched again
    end note
    NOTIFY_HANDLER -> CSAPI: Request Endpoint details for Participant - GET - /participants/{{fsp}}/endpoints\n<color #FF0000><b>Error code:</b> 2003</color>

    activate CSAPI
    CSAPI -> PARTICIPANT_DAO: Fetch Endpoint details for Participant\n<color #FF0000><b>Error code:</b> 2003</color>
    activate PARTICIPANT_DAO
    PARTICIPANT_DAO -> DB: Fetch Endpoint details for Participant
    activate DB
    hnote over DB #lightyellow
        participantEndpoint
    end note
    DB -> PARTICIPANT_DAO: Retrieved Endpoint details for Participant
    deactivate DB
    PARTICIPANT_DAO - -> CSAPI: Return Endpoint details for Participant
    deactivate PARTICIPANT_DAO
    CSAPI - -> NOTIFY_HANDLER: Return Endpoint details for Participant\n<color #FF0000><b>Error codes:</b> 3202, 3203</color>
    deactivate CSAPI
    NOTIFY_HANDLER -> DFSP: Callback with Prepare/fulfil result/error to Participant to specified Endpoint - POST/PUT \n<color #FF0000><b>Error code:</b> 1001</color>
    NOTIFY_HANDLER <- - DFSP: HTTP 200 OK 
end
deactivate NOTIFY_HANDLER
@enduml

PlantUML version 1.2018.13(Mon Nov 26 17:11:51 UTC 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_25-b15
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>